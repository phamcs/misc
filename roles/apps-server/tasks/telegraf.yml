---
# Create Telegraf Directory
- name: Create grafana directory
  ansible.builtin.file:
    path: "{{ app_dir }}/telegraf/{{ item }}"
    state: directory
    mode: '0755'
    owner: "{{ app_user }}"
    recurse: yes
  loop:
    - config
    - data

# Copy telegraf config
- name: Copy telegraf config
  ansible.builtin.template:
    src: "templates/{{ item }}.j2"
    dest: "{{ app_dir }}/telegraf/config/{{ item }}"
    mode: 0755
    owner: "{{ app_user }}"
  loop:
    - telegraf.conf